<%# app/views/users/sessions/new.html.erb %>
<% content_for :title, "#{t('devise.sessions.new.sign_in')} | Fasty" %>

<main class="devise-center">
  <div class="devise-wrap">
    <h1 class="devise-title"><%= t('devise.sessions.new.sign_in') %></h1>

    <div class="devise-card">
      <%= render "users/shared/error_messages", resource: resource %>

      <%= form_for(
            resource,
            as: resource_name,
            url: session_path(resource_name),
            html: { data: { turbo: false }, role: "form", "aria-labelledby": "login-form-title" }
          ) do |f| %>
        <span id="login-form-title" class="sr-only"><%= t('devise.sessions.new.sign_in') %></span>

        <div class="devise-field">
          <%= f.label :email, t('activerecord.attributes.user.email'), class: "devise-label" %>
          <%= f.email_field :email,
                class: "devise-input",
                autofocus: true,
                autocomplete: "email",
                inputmode: "email",
                spellcheck: false %>
        </div>

        <div class="devise-field">
          <%= f.label :password, t('activerecord.attributes.user.password'), class: "devise-label" %>
          <%= f.password_field :password,
                class: "devise-input",
                autocomplete: "current-password" %>
        </div>

        <% if devise_mapping.rememberable? %>
          <div class="devise-check">
            <%= f.check_box :remember_me, id: "remember_me" %>
            <%= f.label :remember_me, t('activerecord.attributes.user.remember_me'), for: "remember_me" %>
          </div>
        <% end %>

        <%= f.submit t('devise.sessions.new.sign_in'), class: "devise-submit" %>
      <% end %>

      <!-- 区切り（細線のみ） -->
      <div class="devise-divider" aria-hidden="true">
        <span class="devise-divider-line"></span>
      </div>

      <!-- OAuth ログイン（Google / LINE） -->
      <div class="devise-oauth">
        <!-- Google ログイン -->
        <%= button_to user_google_oauth2_omniauth_authorize_path,
                      method: :post,
                      form: { class: "inline", data: { turbo: false } },
                      class: "oauth-btn oauth-btn--google oauth-btn--borderless",
                      aria: { label: "Googleでログイン" } do %>
          <span class="oauth-btn__icon" aria-hidden="true">
            <!-- Google 公式 “G” アイコンに近いパス -->
            <svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
              <path fill="#EA4335" d="M8.999 7.152V10.2h4.284c-.174 1.116-.774 2.061-1.647 2.688l2.664 2.055C15.02 13.494 15.75 11.664 15.75 9.36c0-.498-.045-.975-.129-1.44H8.999z"/>
              <path fill="#34A853" d="M4.74 10.71a5.36 5.36 0 0 1-.285-1.71c0-.594.105-1.17.285-1.71L2.13 5.085A8.36 8.36 0 0 0 1.5 8.999c0 1.35.327 2.622.63 3.915L4.74 10.71z"/>
              <path fill="#FBBC05" d="M8.999 4.095c1.17 0 2.214.402 3.039 1.194l2.28-2.28A7.26 7.26 0 0 0 8.999 2.25a7.497 7.497 0 0 0-6.87 4.035L4.74 7.29c.39-1.179 1.47-3.195 4.259-3.195z"/>
              <path fill="#4285F4" d="M8.999 15.75c1.98 0 3.642-.651 4.884-1.806l-2.664-2.055c-.72.504-1.65.81-2.22.81-2.79 0-3.87-2.016-4.259-3.195l-3.111 2.205A7.492 7.492 0 0 0 8.999 15.75z"/>
            </svg>
          </span>
          <p class="oauth-btn__label" style="color:#18b8a5; font-weight:600;">
            Googleでログイン
          </p>
        <% end %>

        <!-- LINE ログイン -->
        <%= button_to user_line_omniauth_authorize_path,
                      method: :post,
                      form: { class: "inline", data: { turbo: false } },
                      class: "oauth-btn oauth-btn--line oauth-btn--borderless",
                      aria: { label: "LINEでログイン" } do %>
          <span class="oauth-btn__icon" aria-hidden="true">
            <!-- LINE ロゴ風：グリーンの角丸四角＋「LINE」文字 -->
            <svg width="18" height="18" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
              <rect x="0" y="0" width="36" height="36" rx="8" fill="#06C755" />
              <text x="18" y="21" text-anchor="middle"
                    font-size="11"
                    font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Helvetica Neue', Arial, sans-serif"
                    fill="#FFFFFF">
                LINE
              </text>
            </svg>
          </span>
          <p class="oauth-btn__label" style="color:#18b8a5; font-weight:600;">
            LINEでログイン
          </p>
        <% end %>
      </div>

      <div class="devise-links">
        <%= render "devise/shared/links" %>
      </div>
    </div>
  </div>
</main>
