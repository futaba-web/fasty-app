<%# app/views/users/sessions/new.html.erb %>
<% content_for :title, "#{t('devise.sessions.new.sign_in')} | Fasty" %>

<main class="devise-center">
  <div class="devise-wrap">
    <h1 class="devise-title"><%= t('devise.sessions.new.sign_in') %></h1>

    <div class="devise-card">
      <%= render "users/shared/error_messages", resource: resource %>

      <%= form_for(
            resource,
            as: resource_name,
            url: session_path(resource_name),
            html: { data: { turbo: false }, role: "form", "aria-labelledby": "login-form-title" }
          ) do |f| %>
        <span id="login-form-title" class="sr-only"><%= t('devise.sessions.new.sign_in') %></span>

        <div class="devise-field">
          <%= f.label :email, t('activerecord.attributes.user.email'), class: "devise-label" %>
          <%= f.email_field :email,
                class: "devise-input",
                autofocus: true,
                autocomplete: "email",
                inputmode: "email",
                spellcheck: false %>
        </div>

        <div class="devise-field">
          <%= f.label :password, t('activerecord.attributes.user.password'), class: "devise-label" %>
          <%= f.password_field :password,
                class: "devise-input",
                autocomplete: "current-password" %>
        </div>

        <% if devise_mapping.rememberable? %>
          <div class="devise-check">
            <%= f.check_box :remember_me, id: "remember_me" %>
            <%= f.label :remember_me, t('activerecord.attributes.user.remember_me'), for: "remember_me" %>
          </div>
        <% end %>

        <%= f.submit t('devise.sessions.new.sign_in'), class: "devise-submit" %>
      <% end %>

      <!-- 区切り（細線のみ） -->
      <div class="devise-divider" aria-hidden="true">
        <span class="devise-divider-line"></span>
      </div>

      <!-- OAuth ログイン（Google / LINE） -->
      <div class="devise-oauth">
        <!-- Google ログイン -->
        <%= button_to user_google_oauth2_omniauth_authorize_path,
                      method: :post,
                      form: { class: "inline", data: { turbo: false } },
                      class: "oauth-btn oauth-btn--google oauth-btn--borderless",
                      aria: { label: "Googleでログイン" } do %>
          <span class="oauth-btn__icon" aria-hidden="true">
            <svg width="18" height="18" viewBox="0 0 48 48">
              <path fill="#FFC107" d="M43.6 20.5H42V20H24v8h11.3C34 32.9 29.5 36 24 36 16.8 36 11 30.2 11 23s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l5.7-5.7C34.2 4.9 29.4 3 24 3 16 3 9.2 7.6 6.3 14.7z"/>
              <path fill="#FF3D00" d="M6.3 14.7l6.6 4.8C14.5 16 18.9 13 24 13c3.1 0 5.9 1.1 8.1 2.9l5.7-5.7C34.2 4.9 29.4 3 24 3 16 3 9.2 7.6 6.3 14.7z"/>
              <path fill="#4CAF50" d="M24 45c5.4 0 10.2-1.8 13.6-4.9l-6.3-5.2C29.5 36 26.9 37 24 37c-5.4 0-9.9-3.6-11.4-8.5l-6.5 5C8.9 41.8 15.9 45 24 45z"/>
              <path fill="#1976D2" d="M43.6 20.5H42V20H24v8h11.3c-1 2.9-3.8 6-7.3 6-5.4 0-9.9-3.6-11.4-8.5l-6.5 5C12 38.7 17.5 43 24 43c10.8 0 20-7.8 20-21 0-1.3-.1-2.2-.4-3.5z"/>
            </svg>
          </span>
          <p class="oauth-btn__label">Googleでログイン</p>
        <% end %>

        <!-- LINE ログイン -->
        <%= button_to user_line_omniauth_authorize_path,
                      method: :post,
                      form: { class: "inline", data: { turbo: false } },
                      class: "oauth-btn oauth-btn--line",
                      aria: { label: "LINEでログイン" } do %>
          <p class="oauth-btn__label">LINEでログイン</p>
        <% end %>
      </div>

      <div class="devise-links">
        <%= render "devise/shared/links" %>
      </div>
    </div>
  </div>
</main>
