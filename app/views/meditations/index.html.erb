<%# app/views/meditations/index.html.erb %>
<% content_for :title, "瞑想メニュー" %>

<!-- Weekly Status Banner (center, no border, content-width, responsive) -->
<div class="mx-auto max-w-4xl p-4">
  <div
    class="w-fit mx-auto flex flex-col items-center gap-1
           rounded-[16px] md:rounded-[20px] bg-emerald-50/90 px-5 py-3
           text-emerald-900 font-semibold shadow"
    role="status" aria-live="polite">
    <p class="text-center leading-relaxed text-sm sm:text-base md:text-[17px]">
      <%= @banner_message %>
    </p>
    <%= link_to "履歴を見る", meditation_summary_path,
          class: "text-center inline-block text-xs sm:text-sm underline underline-offset-2 hover:no-underline" %>
  </div>
</div>

<!-- メニュー一覧 -->
<div class="mx-auto max-w-4xl p-4">
  <h1 class="text-xl md:text-2xl font-semibold">瞑想メニュー</h1>

  <% if @meditations.blank? %>
    <p class="mt-4 text-sm md:text-base text-stone-600">メニューがまだありません。管理者にお問い合わせください。</p>
  <% else %>
    <div class="mt-4 grid gap-4 sm:grid-cols-2">
      <% @meditations.each do |m| %>
        <article class="rounded-xl border border-stone-200 bg-white p-4 shadow-sm">
          <div class="flex items-start justify-between gap-3">
            <h2 class="font-medium leading-snug"><%= m[:title] %></h2>
            <span class="shrink-0 text-[11px] px-2 py-0.5 rounded bg-stone-100"><%= m[:duration_min] %>分</span>
          </div>

          <% if m[:tags].present? %>
            <div class="mt-2 flex flex-wrap gap-1">
              <% m[:tags].each do |t| %>
                <span class="text-[11px] px-2 py-0.5 rounded bg-emerald-50 text-emerald-700">#<%= t %></span>
              <% end %>
            </div>
          <% end %>

          <div class="mt-3">
            <%= link_to "瞑想を始める", m[:url], target: "_blank", rel: "noopener",
                class: "inline-block text-sm md:text-[15px] underline hover:opacity-80" %>
          </div>
        </article>
      <% end %>
    </div>
  <% end %>
</div>
